<!DOCTYPE html>
<html>
<head>
  <title>Rock Paper Scissors</title>
  <meta charset="UTF-8"/>
</head>
<body>
  <script>
      // let the computer pick
      function computerPlay() {
          const OPTIONS = [
              "rock",
              "paper",
              "scissors"
          ];
          return OPTIONS[Math.floor(Math.random() * OPTIONS.length)];
      }

      // play a round. player wins = 1, computer wins = -1, tie = 0
      function playRound(playerSelection, computerSelection) {
          if (playerSelection === "rock") {
              switch (computerSelection) {
                    case "rock":
                        console.log("Tie game.");
                        return 0;
                    case "paper":
                        console.log("You lose.");
                        return -1;
                    case "scissors":
                        console.log("You win!");
                        return 1;
              }

          } else if (playerSelection === "paper") {
              switch (computerSelection) {
                    case "rock":
                        console.log("You win!");
                        return 1;
                    case "paper":
                        console.log("Tie game.");
                        return 0;
                    case "scissors":
                        console.log("You lose.");
                        return -1;
              }

          } else {
              switch (computerSelection) {
                    case "rock":
                        console.log("You lose.");
                        return -1;
                    case "paper":
                        console.log("You win!");
                        return 1;
                    case "scissors":
                        console.log("Tie game.");
                        return 0;
              }

          }
      }

      // run this function in console to play
      function game() {
          let playerScore = 0;
          let computerScore = 0;

          for (i=0; i<5; i++) {
            // make it best of 5 or first to 3
            if (computerScore === 3 || playerScore === 3 ) {
                break;
            } else {
                let computerSelection = computerPlay();
                
                let playerSelection = prompt("Best of 5. Game " + (i+1) + ". Rock, paper, or scissors?");

                playerSelection = playerSelection.toLowerCase();

                console.log("Game " + (i + 1) + ": The computer chose " + computerSelection + ". You chose " + playerSelection + ".");

                if (playerSelection === "rock" || playerSelection === "paper" || playerSelection === "scissors" ) {
                    winner = playRound(playerSelection, computerSelection);
                    if (winner == 1) {
                        playerScore = playerScore + 1;
                    } else if (winner == -1) {
                        computerScore = computerScore + 1;
                    } else {
                        // play again because of tie
                        i = i - 1;
                    }
                } else {
                    console.log("Sorry that is not a valid play. Try again.")
                    // play again because invalid input
                    i = i - 1;
                }
            }
          }

          if (playerScore >= 3) {
              console.log("You were first to win 3!")
          } else {
              console.log("You lost. Computer won 3 games first.")
          }
      }

      game();

  </script>
</body>
</html>